"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SimpleFileStorageBase",{enumerable:true,get:()=>SimpleFileStorageBase});const _middleware=require("./middleware");const _stream=require("./stream");class SimpleFileStorageBase{async load(){await this.load_str();const data=await this.parseData(this.data_str);await this.validate(data);this.data=data;return}async save(){await this.validate(this.data);this.data_str=await this.stringifyData(this.data);await this.save_str();return}async validate(data){await this.middleware.run(data||this.data);return}async load_str(){this.data_str=await this.stream.readStorageFile();return}async save_str(){await this.stream.createStorageFile(this.data_str);return}constructor(file_path){this.data_str="";this.middleware=new _middleware.SimpleFileStorageMiddleware;this.stream=new _stream.SimpleFileStorageStream(file_path)}}